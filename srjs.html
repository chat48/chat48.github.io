<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" type="image/x-icon" href="zee.png">
<title></title>
<style>
body {
font-family: Verdana,Roboto,"Droid Sans","游ゴシック",YuGothic,"ヒラギノ角ゴ ProN W3","Hiragino Kaku Gothic ProN","メイリオ",Meiryo,sans-serif;
font-size: 14px;
font-weight: 400;
line-height: 1.5;height:1200px;
color: #efefef;margin:0;padding:0;overflow-x:hidden;
}
#bg{position:fixed;top:0;left:0;color:#efefef;z-index:-1;width:100%;height:100%;background: url(https://image.showroom-cdn.com/showroom-prod/assets/img/room/background/default.png);background-repeat: no-repeat;background-size: 120%;background-position: center;}
#dl{position:fixed;top:0;left:0;color:#efefef;z-index:4;width:100%;opacity: 0.5;z-index:1;display:none;}
a{color:#ff0000;text-decoration:none;}
#nma{color:#fffb06;font-weight: bold;}

#nmd span{background:blue;color:#fff;padding:0px 4px 0px 4px;}
#vn{background:red !important;}
#rk2{position:fixed;bottom:10px;left:10px;color:#efefef;}
#pp{position:fixed;z-index:3;bottom:10px;right:10px;}
#pp a{color:#fff;background:#e22cb0;}
#pp span{padding:2px;font-size:0.9em;}
iframe{z-index:2;opacity:.6;border:none;overflow:hidden;margin:0;padding:0;}
#nmd{position:fixed;z-index:3;left:50%;transform: translateX(-50%);top:10px;font-size:14px;padding: 5px;background:rgba(0,0,0,0.3);}
#pod{left:0;top:560px;width:100%;height:100%;opacity:1;position:absolute;z-index:3;}
#rk{left:50%;transform: translateX(-50%);top:60px;height:535px;width:280px;background:rgba(0,0,0,0.6);position:fixed;z-index:3;display:none;}
#r{background:#006600;color:#fff;border:none;cursor:pointer;}
#l{background:#0070ff;color:#fff;border:none;cursor:pointer;}
#s{background:red;color:#fff;border:none;}
#unm{position:fixed;z-index:3;left:50%;transform:translateX(-50%);top:300px;background:rgba(0,0,0,0.6);padding:0px 6px 0px;font-size:18px;font-weight: 400;cursor:pointer;}
video{width:1152px;height:normal;}

::-webkit-scrollbar {
    display: none;
}

/*comment*/
#clog{left:0;top:0px;width:205px;padding:12px 6px 0px;background:rgba(0,0,0,0.4);position:absolute;font-size: 11px;
}
#clog h3{text-align:center;position:absolute;z-index:2;left:0;top:-12px;background:rgba(0,0,0,0.6);color:#fff;width:207px;padding:5px;}

.comment-log-avatar img {
    width: 110%;
}

#cmn span{position:absolute;right:2px;top:0;color:#ffba15;font-size:.7em;}
#cmn{position:relative;margin-bottom:10px;margin-top:20px;z-index:1;}
.commentlog-row {
    direction: ltr;
    padding: 8px 8px 8px 16px;border-radius:4px;
    overflow: hidden;background:rgba(0,0,0,0.4);
    position: relative;margin-top:4px;width:181px;
}
.comment-log-avatar {
    width: 40px;
    position: absolute;
    top: 3px;
    left: 0;
}

.comment-log-comment {
    word-break: break-word;direction: ltr;
    margin-left: 30px;margin-right: 5px;color: #fff;
}
.comment-log-name {
    word-break: break-all;
    overflow: initial;
    color: #00ccff;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    margin-left: 30px;margin-right: 5px;
}

.comment-log-list {
   direction: ltr;
	 height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
}
#cmn {word-break: break-word;
    position: absolute;
    top: 0px;
    bottom: 0px;
    left: 0px;
    right: -17px;
    overflow: auto;
}
ul {
    list-style: none;
    margin: 0;
    padding: 0;
}


/*gift*/
#glog{right:0;top:0px;width:190px;padding:12px 6px 0px;background:rgba(0,0,0,0.4);position:absolute;font-size: 11px;}

#glog h3{text-align:center;position:absolute;z-index:2;left:0;top:-12px;background:rgba(0,0,0,0.6);color:#fff;width:192px;padding:5px;}
.fz{font-size: 11px;}
.red{color:#ddd;}
.k1{color:#ffcc00;}
.k2{color:#f661ff;}
.k3{color:#00ff00;}
.k4{animation:blinkingText 2s infinite;}
@keyframes blinkingText{
    50%{     color: #ff0512;    }

    100%{   color: #05ff05; font-size: 12px; }
}
.gift-log-gift img{width:30px;}

.gift-log-avatar img {
    width: 140%;
}

#gift .tm{direction: ltr;position:absolute;right:2px;top:0;color:#ffba15;font-size:.7em;}
#gift{position:relative;margin-bottom:10px;margin-top:20px;z-index:1;}

.giftlog-row {
    direction: rtl;background:rgba(0,0,0,0.4);
    padding: 5px;
    overflow: hidden;border-radius:4px;
    position: relative;margin-top:4px;width: 180px;
}
.gift-log-avatar {
    width: 40px;direction: ltr;
    position: absolute;
    top: 0;
    left: 0;
}

.gift-log-gift {
    direction: ltr;
    word-break: break-word;
    margin-left: 55px;color: #efefef;
}
.gift-log-name {
    word-break: break-all;direction: ltr;
    overflow: initial;
    color: #00ccff;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    margin-left: 55px;
}

.gift-log-list {
    direction: ltr;
	 height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
}
#gift {
    position: absolute;
    top: 0px;
    bottom: 0px;
    left: 0px;
    right: -17px;
    overflow: auto;
}

/*stgift*/
#stg {width: 100%;position:absolute;text-align:center;left:45px;display:none;}
#stg img{position:relative;width:100px;margin-left:-70px;}
#stg .tw{height:250px;margin-left:-80px;}
#l1 {bottom:0px;display: inline-block;position:absolute;left:50%;z-index:1;transform: translateX(-50%);}
#l2 {bottom:40px;display: inline-block;position:absolute;left:50%;transform: translateX(-50%);}

.mcon {margin-top:100px;text-align:center;margin-left:50px;}
.pcon img{width:100px;margin-top:20px;}
.pcon{display: inline-block;width:100px;margin-left:-50px;margin-top:-20px;text-align:center;}
.inf{font-size:.8em;width:60px;height:40px;overflow:hidden;font-weight:100;color:#ffff00;}
.psn{background:rgba(0,0,0,0.4);font-size:.8em;width:60px;overflow:hidden;height:30px;position:absolute;left:20px;}
.an1{transform-origin: bottom center;
    animation:rot1 6s linear infinite;
}
@keyframes rot1 {

    0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(12deg);
  }
      50% {
    transform: rotate(0deg);
  }
  75% {
    transform: rotate(-12deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

.an2{
    animation:rot2 6s linear infinite;
}
@keyframes rot2 {

    0% {
    transform: rotate(12deg);
  }
  25% {
    transform: rotate(0deg);
  }
      50% {
    transform: rotate(-12deg);
  }
  75% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(12deg);
  }
}


.bounce-out-top {
	-webkit-animation: bounce-out-top 1.5s linear infinite;
	        animation: bounce-out-top 1.5s linear infinite;
} 

@-webkit-keyframes bounce-out-top {
  0% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  50% {
    -webkit-transform: translateY(-80px);
            transform: translateY(-80px);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  
  100% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
    
  }
}

#cls{color: red;position:fixed;font-weight:600;right:10px;top:0;cursor:pointer;}
#rk h3{text-align:center;position:fixed;left:0;top:-16px;background: black;
width: 100%;padding: 5px 0 5px;}
#bxr {padding-bottom:10px;padding-top:20px;margin-top:20px;margin-left:10px;height:500px;overflow:scroll;}
.ucon img{width:40px;vertical-align: text-top;}
.ucon{margin-bottom:25px;}
.nb{margin-right:5px;}
.nm{display: inline-block;margin-right:10px;width:165px;word-break: break-word;vertical-align: text-top;}
body {
font-family: Verdana,Roboto,"Droid Sans","游ゴシック",YuGothic,"ヒラギノ角ゴ ProN W3","Hiragino Kaku Gothic ProN","メイリオ",Meiryo,sans-serif;
font-size: 12px;
font-weight: 400;
line-height: 1.5;
height: 100%;
color: #efefef;background:#333;
}

#tooltip {
  position: fixed;z-index:10;
  font-size: .6em;text-align:center;
  padding: 5px;
  background: #444;
  border: 1px solid #444;
  visibility: hidden;
  box-shadow: -2px 2px 5px rgba(255, 255, 255, 0.6);
  transition: opacity 0.3s, visibility 0s;
  color: white;
  min-width: 120px;
}

</style>




<body></body>

<script src="hls.js"></script>
    
<script>
var qr = window.location.href.split("?")[1];
var sqr = new URLSearchParams(qr);
document.title=sqr.get("n");

document.body.innerHTML='<img src="dl.gif" id="dl"><div id="bg"></div><div id="pod"><div id="pdm" class="mcon"></div></div><div id="rk"><h3>Live Rank</h3><span id="cls">X</span><div id="bxr"></div></div><div id="clog"><h3>Comments</h3><ul id="room-comment-log-list" class="comment-log-list"><div id="cmn"></div></ul></div><div id="glog"><h3>Gifts</h3><ul id="room-gift-log-list" class="gift-log-list"><div id="gift"></div></ul></div><div id="stg"><div id="stgf"></div></div><div id="nmd"><a href="https://www.showroom-live.com/room/profile?room_id='+sqr.get("r")+'" id="nma" target="_blank">'+sqr.get("n")+'</a> <a href="https://www.showroom-live.com/'+sqr.get("l")+'" target="_blank"><span>🕒 '+gtm(sqr.get("t"))+'</span><span id="vn">'+sqr.get("v")+'</span></a></div><div id="vd"><video id="video" autoplay muted playsinline></video></div><div id="pp"><span id="r">Rank</span> <span id="l">Reload</span></div><div id="unm">Unmuted audio</div>';



var urv="";var lgf = {};
var oc = true;
document.querySelector("#r").onclick=function(){
if(oc){
rk.style.display="block";oc = false;grk();
}else{
rk.style.display="none";oc = true;}
};

document.querySelector("#cls").onclick=function(){document.querySelector("#r").click()};
document.querySelector("#unm").onclick=function(){
var vd = document.querySelector("#video");
vd.muted = !vd.muted;this.style.display="none";
};


setInterval(function(){document.getElementById("stg").src = document.getElementById("stg").src;},13000);
setInterval(function(){document.getElementById("pod").src = document.getElementById("pod").src;},10000);

var z=true,v=true;

setTimeout(function(){document.querySelector("#l").click();},1000);
document.querySelector("#l").onclick=function(){
load(urv);
};

setInterval(function(){
document.getElementById("video").style.width="100%";
var tb = document.getElementById("vd");
var gl = document.getElementById("glog");
var st = document.getElementById("stg");
var pod = document.getElementById("pod");
var cl = document.getElementById("clog");
cl.style.height=(tb.offsetHeight-24)+"px";
cl.style.top="5px";
cl.style.left="5px";
/*
*/
st.style.bottom=(innerHeight-tb.offsetHeight)+"px";
pod.style.top=(tb.offsetHeight-80)+"px";
gl.style.height=(tb.offsetHeight-24)+"px";
gl.style.top="5px";
gl.style.right="5px";
},4000);

function load(vl){
if(Hls.isSupported()){
        var video = document.getElementById("video");
		//video.ondurationchange  = function(){alert("Starting to load video");}; 
        var hls = new Hls();
        hls.loadSource(vl);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED,function()
        {video.currentTime = 4;
            video.play();
        });
    }
    else if (video.canPlayType("application/vnd.apple.mpegurl"))
    {
        video.src = vl;
        video.addEventListener("canplay",function()
        {
			video.currentTime = 4;
            //video.play();
        });
    }
	}

https://www.showroom-live.com/api/room/profile?room_id=99668
function gtv(){
var xhttp = new XMLHttpRequest();
xhttp.onload = function() {
if(xhttp.readyState == 4 && xhttp.status == 200){
var vn = JSON.parse(this.responseText);
document.getElementById("vn").innerHTML = "👁 "+vn["view_num"];
}

};
xhttp.open("GET", "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/room/profile?room_id="+sqr.get("r")+"&t="+ new Date().getTime());
xhttp.send();
}
gtv();

setInterval(gtv,22000);


//comment
var fc=true;
function gcom(){
var xhttp = new XMLHttpRequest();

xhttp.onload = function(){
if(xhttp.readyState == 4 && xhttp.status == 200){
cjs(JSON.parse(this.responseText));
document.getElementById("cmn").scrollTo(0, 0);
}
};
xhttp.open("GET", "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/comment_log?room_id="+sqr.get("r"));
xhttp.send();



function cjs(o){
var o = o["comment_log"];
var html="";
for (x in o){
if(isNaN(o[x].comment)==false)continue;
html += '<li class="commentlog-row"><span>'+gtm(o[x].created_at)+'</span><div class="comment-log-avatar"><img src="'+o[x].avatar_url+'"></div><div class="comment-log-name">'+o[x].name+'</div><div class="comment-log-comment">'+o[x].comment+'</div></li>';
}
document.getElementById("cmn").innerHTML= html;

}

}
gcom();
setInterval(function(){if(fc)gcom();},5000);


function gfob(){
var xmlhttp = new XMLHttpRequest();
var url = "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/gift_list?room_id=318227";
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
mobjs(JSON.parse(this.responseText));
     }
}
xmlhttp.open("GET", url, true);
xmlhttp.send();

function mobjs(o){
var o = o["normal"];
for (x in o){
var idg = "id_"+o[x].gift_id;
var v = [o[x].image,o[x].point];
eval('lgf.id_'+o[x].gift_id + ' = "'+v+'"');
}
ggf();
}

}
gfob();

//gift
var fg=true;
function ggf(){
var xhttp = new XMLHttpRequest();

xhttp.onload = function(){
if(xhttp.readyState == 4 && xhttp.status == 200){
gfjs(JSON.parse(this.responseText));
setTimeout(function(){gstg();},400);
}
};
xhttp.open("GET", "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/gift_log?room_id="+sqr.get("r"));
xhttp.send();


function gfjs(o){
var o = o["gift_log"];
o = o.reverse();
var html="";
for (x in o){
eval('var im = "id_'+o[x].gift_id+'"');
var pt = lgf[im].split(",")[1];
if(pt==undefined)continue;

var gi = '<span class="red fz">'+pt+'pt';
if(pt.toString().length==5)gi = '<span class="k4 fz">'+pt+'pt';
if(pt.toString().length==4)gi = '<span class="k3 fz">'+pt+'pt';
if(pt.toString().length==3)gi = '<span class="k2 fz">'+pt+'pt';
if(pt.toString().length==2)gi = '<span class="k1 fz">'+pt+'pt';

html += '<li class="giftlog-row"><span class="tm">'+gtm(o[x].created_at)+'</span><div class="gift-log-avatar"><img src="'+o[x].avatar_url+'"></div><div class="gift-log-name">'+o[x].name+'</div><div class="gift-log-gift"><img src="'+o[x].image+'"> '+gi+' ('+o[x].num+'x)</span></div></li>';
}
document.getElementById("gift").innerHTML= html;

}

}

setInterval(function(){if(fg)ggf();},10000);



function gstg(){

var xhttp = new XMLHttpRequest();

xhttp.onload = function(){
if(xhttp.readyState == 4 && xhttp.status == 200){
gstjs(JSON.parse(this.responseText));
document.getElementById("stg").style.display="block";

var elm = document.querySelectorAll("#stgf img");
var tp = document.querySelector("#tooltip");
elm.forEach(function(el) {
el.onmouseover=function(){
tp.style.visibility="visible";
tp.textContent = "From: "+this.getAttribute("alt");
};
el.onmouseout=function(){
tp.style.visibility="hidden";
tp.textContent = "";
};
});
document.body.onpointermove = e => {
    tp.style.left = (e.clientX-60)+"px";
    tp.style.top = (e.clientY-40)+"px";
};

}
};
xhttp.open("GET", "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/stage_gift_list?room_id="+sqr.get("r")+"&t="+ new Date().getTime());
//xhttp.open("GET", "stage_gift_list5.json?"+new Date().getTime());
xhttp.send();

}

function gstjs(a){
var o = a["stage_gift_list"];
o = o.reverse();
var html="";
for (x in o){
var tw="";var dv="";var l1 = 0;
eval('var im = "id_'+o[x].gift_id+'"');
if(o[x].gift_id==21 || o[x].gift_id==600222 || o[x].gift_id==30003)tw= 'class="tw"';
if(a["stage_gift_list"].length>20){
var l1 = Math.ceil(a["stage_gift_list"].length/2);
if(a["stage_gift_list"].length>(l1-1)){if(x==0)html += '<div id="l1">';}
html += '<img src="'+lgf[im]+'" alt="'+o[x].name+'" '+tw+'>';
if(x==l1)html += '</div>';
if(a["stage_gift_list"].length>l1){if(x==l1)html += '<div id="l2">';}
if(a["stage_gift_list"].length==x)html += '</div>';
}else{
html += '<img src="'+lgf[im]+'" alt="'+o[x].name+'" '+tw+'>';
}

}
document.getElementById("stgf").innerHTML= html;

}




function gvd(){
var xmlhttp = new XMLHttpRequest();
var url = "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/streaming_url?room_id="+sqr.get("r");
xmlhttp.onreadystatechange = function() {
if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
urv = JSON.parse(this.responseText);
urv = urv["streaming_url_list"][0]["url"];
load(urv);
     }
};
xmlhttp.open("GET", url, true);
xmlhttp.send();
}

gvd();

document.querySelector("#gift").onmouseover=function(){fg=false;};
document.querySelector("#gift").onmouseout=function(){fg=true;};
document.querySelector("#cmn").onmouseover=function(){fc=false;};
document.querySelector("#cmn").onmouseout=function(){fc=true;};
document.querySelector("#stg").onmouseover=function(){fc=false;this.style.zIndex=3;};
document.querySelector("#stg").onmouseout=function(){fc=true;this.style.zIndex=0;};

function gpod(){
var xmlhttp = new XMLHttpRequest();
var url = "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/stage_user_list?room_id="+sqr.get("r");
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
podjs(JSON.parse(this.responseText));
     }
}
xmlhttp.open("GET", url, true);
xmlhttp.send();

function podjs(o){
var html="";
var o = o['stage_user_list'];

for (x in o){
var av = o[x]['user']['avatar_url'];
var rk = o[x]['rank']; 
var nm = o[x]['user']['name'];
var dv = '';var dve = '';var rg = '';var anm;
if(x<13)rg = rk+'<br>';
if(x==0){dv = '<div id="pod1" class="anm">';}
if(x==12){dve = '</div><div id="pod2" class="anm">';}
if(x==30){dve = '</div><div id="pod3" class="anm">';}
if(x==48){dve = '</div><div id="pod4" class="anm">';}
if(x==66){dve = '</div><div id="pod5" class="anm">';}
if(x==84){dve = '</div><div id="pod6" class="anm">';}
if(x==99){dve = '</div>';}

if(x % 2 == 0){anm=" an1";}else{anm=" an2";}
if(x==11||x==7||x==3||x==0||x==4||x==8||x==12)anm=" an1";
if(x==9||x==5||x==1||x==2||x==6||x==10)anm=" an2";
if(x==0)anm=" an1 bounce-out-top";

html += dv+'<div class="pcon'+anm+'"><div class="psn"><div class="inf">'+rg+''+nm+'</div></div><img src="'+av+'"></div>'+dve;

}
document.getElementById("pdm").innerHTML= html;

var ch = document.querySelector("#pod1").childNodes;
document.querySelector("#pod1").innerHTML= '<div class="'+ch[11].className+'">'+ch[11].innerHTML+'</div><div class="'+ch[9].className+'">'+ch[9].innerHTML+'</div><div class="'+ch[7].className+'">'+ch[7].innerHTML+'</div><div class="'+ch[5].className+'">'+ch[5].innerHTML+'</div><div class="'+ch[3].className+'">'+ch[3].innerHTML+'</div><div class="'+ch[1].className+'">'+ch[1].innerHTML+'</div><div class="'+ch[0].className+'">'+ch[0].innerHTML+'</div><div class="'+ch[2].className+'">'+ch[2].innerHTML+'</div><div class="'+ch[4].className+'">'+ch[4].innerHTML+'</div><div class="'+ch[6].className+'">'+ch[6].innerHTML+'</div><div class="'+ch[8].className+'">'+ch[8].innerHTML+'</div><div class="'+ch[10].className+'">'+ch[10].innerHTML+'</div><div class="'+ch[12].className+'">'+ch[12].innerHTML+'</div>';
}
}

gpod();

function grk(){
var xmlhttp = new XMLHttpRequest();
var url = "https://justcors.com/tl_5768276/https://www.showroom-live.com/api/live/stage_user_list?room_id="+sqr.get("r");
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
gkjs(JSON.parse(this.responseText));
     }
}
xmlhttp.open("GET", url, true);
xmlhttp.send();

function gkjs(o){
var html="";
var o = o['stage_user_list']

for (x in o){
var k = x+1;
html += '<div class="ucon"><span class="nb">'+(parseInt(x)+1)+'.</span><img src="'+o[x]['user']['avatar_url']+'"> <div class="nm">'+o[x]['user']['name']+'</div></div>';

}
document.getElementById("bxr").innerHTML= html;

}
}


function gtm(t) {
var h = new Date(t*1000).getHours();
var m = new Date(t*1000).getMinutes();

h = (h<10) ? "0" + h : h;
m = (m<10) ? "0" + m : m;

return h + ":" + m;
}

var tip = document.createElement("div");
tip.id="tooltip";tip.innerHTML="tooltip";
document.body.appendChild(tip);
</script>







